# TRIADs ANalysis Code

Note: in order to run this code successfull, you need to create an R project within this directory. This is because all file paths are relative to this fodler -- creating an R project within a folder automatically changes the R present working directory to the project's folder.

## directories

Note: some of these directories are NOT contained in this repository. You MUST create these directories prior to running the pipeline -- intermediate data files are written to these directories and an error will be thrown if they are not created beforehand.

| directory     | explanation                                                                                                           |
| ------------- | --------------------------------------------------------------------------------------------------------------------- |
| `./figures`   | figure `.png` files written out in the analysis pipeline. Eventually used in Kyle Kurkela's dissertation Chapter 3.   |
| `./functions` | miscellaneous R functions used throughout the analysis pipeline. these are often sources at the beginning of scripts. |
| `./markdowns` | `*.html` reports are stored here.                                                                                     |
| `./metadata`  | two meta data csv files used for identifying the various Pavlovia studies AND the different IRI questions.            |
| `./tidy_data` | houses various datasets written out during intermediate steps of the analysis pipeline.                               |

## files

### Core analysis files

| file                                 | explanation                                                                                                                                                                                                                                                                                                                   | output file                                                                     |
| ------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------- |
| `00_run.R`                           | master script. runs all subsequent scripts in the pipeline in order.                                                                                                                                                                                                                                                          |                                                                                 |
| `00_accounting.Rmd`                  | Account for the data that has been collected. How many datasets do we have? How many datasets do we have according to those that exist on the server? How many datasets do we have according to Prolific?                                                                                                                     | `accounting.html`                                                               |
| `01_compile.R`                       | compile all available data within this directory into a single data frame.                                                                                                                                                                                                                                                    | `compiled_experiment.rds`                                                       |
| `02_tidy_bds.R`                      | selects out the backwards digit span data from `compiled_experiment.rds` and tidys it for further analysis.                                                                                                                                                                                                                   | `tidy_bds.rds`                                                                  |
| `02_encoding.R`                      | selects out the encoding data from `compiled_experiment.rds` and tidys it for further analysis. Does the same for the catch trials (trials where participants provided free text descriptions of their imaginations. )                                                                                                        | `tidy_encoding.rds`, `tidy_catch.rds`                                           |
| `02_tidy_surveys.R`                  | selects out the four sureys from `compiled_experiment.rds` and tidys each one for further analysis.                                                                                                                                                                                                                           | `tidy_debrief.rds`, `tidy_sam.rds`, `tidy_iri.rds`, `tidy_vviq.rds`             |
| `03_retrieval.R`                     | selects out the retrieval data from `compiled_experiment.rds`, tidys it for further analysis, and joins it with `tidy_encoding.rds` data                                                                                                                                                                                      | `tidy_retrieval.rds`                                                            |
| `03_retrieval_data_dictionary.md`    | describes the columns of the `tidy_retrieval.rds` data in detail.                                                                                                                                                                                                                                                             |                                                                                 |
| `04_check_subject_exclusions.Rmd`    | Evaluate whether participants should not be paid for their participation AND should be excluded from further analysis.                                                                                                                                                                                                        | `check_subject_exclusions.html`                                                 |
| `05_greade_cued_recall.R`            | Using an automated grading algorithm, grade cued recalls as correct/incorrect                                                                                                                                                                                                                                                 | `graded_df.rds`                                                                 |
| `06_calculate_dependency.R`          | Calculate retrieval dependency in the graded cued recall data.                                                                                                                                                                                                                                                                | `tidy_dependency.rds`                                                           |
| `06_calculate_dependency_horner.R`   | Calculate retrieval dependency in the graded cued recall data using the MATLAB script included with Aiden Horner's study.                                                                                                                                                                                                     | `tidy_horner.rds`                                                               |
| `06_secondary_exclusions.Rmd`        | Evaluate whether participants should be excluded from further analysis.                                                                                                                                                                                                                                                       | `secondary_exclusions.html`                                                     |
| `07_recall_performance.Rmd`          | How well did participants do on cued recall? What was their Retrieval Dependency? Broken down by condition [`famous person`, `famous place`] and session [`session1`, `session2`]                                                                                                                                             | `recall_performance.html`                                                       |
| `07_winsor.Rmd`                      | A parameterized R markdown that evaluates how retrieval dependency changes as a result of various winsors. Parameters include `winsorLow` = lower bound percentile to exclude and `winsorHigh` = higher bound percentile to exclude. Must be between [0-1]. See `00_run.R`.                                                   | `no_winsor.html`, `05_95_winsor.html`, `10_90_winsor.html`, `25_75_winsor.html` |
| `08_key_analysis.R`                  | Run the preregistered stopping rule. Prints results to the R console. analysis.                                                                                                                                                                                                                                               | `recall_performance.html`                                                       |
| `09_calculate_bias_index.R`          | Calculate "bias" -- famous person retrieval dependency - famous place retrieval dependency                                                                                                                                                                                                                                    | `tidy_bias.rds`                                                                 |
| `09_index_to_survey.R`               | How correlated is our key experimental variable "bias" with performance on our surveys? Creates Figures in R, no output.                                                                                                                                                                                                      |                                                                                 |
| `09_Kurkela_v_Horner.Rmd`            | How does Kyle's retrieval dependency calculation compare with those from Aiden Horner?                                                                                                                                                                                                                                        | `Kurkela_vs_Horner.html`                                                        |
| `09_proportion_analysis.R`           | Same as `08_key_analysis.R`, except with cued recall performance outcome.                                                                                                                                                                                                                                                     |                                                                                 |
| `10_across_subject_correlations.Rmd` | Markdwon seeing how correlated all of our key experimental variables are across subjects. ALso looks a the relationship between retrieval dependency, encoding imagintation success, and cued recall accuracy across subjects. This is where I originally found the U-shaped relationship between cued recall and dependency. | `across_subjects_correlations.html`                                             |
| `10_explore_dependency.Rmd`          | Markdown breaking down the retrieval dependency outcome variable.                                                                                                                                                                                                                                                             | `explore_dependency.html`                                                       |
| `10_explore_proportion.Rmd`          | Markdown breaking down the proportion of cued recall prompts answered correctly outcome variable.                                                                                                                                                                                                                             | `explore_proportion.html`                                                       |
| `10_explore_success.Rmd`             | Markdown breaking down the imagination success outcome variable.                                                                                                                                                                                                                                                              | `explore_success.html`                                                          |
| `10_familarity_ratings.Rmd`          | Does familarity with the stimuli explain any of the condition [`famous place`, `famous person`] effects seen in the previous three markdowns?                                                                                                                                                                                 | `familiarity_ratings.html`                                                      |
| `10_survey_analysis.Rmd`             | Some basic analyses of the survey data and how they related to task performance.                                                                                                                                                                                                                                              | `survey_analysis.html`                                                          |

### sidecar files

These files are "sidecar" files. In other words, these are files containing code for analyses that are tangenital to the main analyses above.

| file                                  | explanation                                                                                                                                                                                                                |
| ------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `analyze_bisby_2018.R`                | analyze the openly available retrieval dependency data from Bisby et al 2018, focusing in on the retrieval dependency ~ cued recall accuracy relationship. Assumes the openly available data are in your Downloads folder. |
| `Bisby_2018_Reanalysis.Rmd`           | Same as `analyze_bisby_2018.R`, but in markdown form.                                                                                                                                                                      |
| `Calculate_Dependency.m`              | MATLAB helper script. Calculates Retrieval Dependency using Aiden Horner's `Dependency.m` script.                                                                                                                          |
| `Dependency.m`                        | MATLAB script from one of Aiden Horner's publications. Calculates retrieval dependency.                                                                                                                                    |
| `CreateFigure.R`                      | Stiches together winsor plots to create a single plot.                                                                                                                                                                     |
| `compare_kurkelaCalc_to_hornerCalc.R` | same as `09_Kurkela_v_Horner.Rmd`, but in regular R script form.                                                                                                                                                           |
| `grading_accuracy.R`                  | tidys data from an RAs by-hand grades of the cued recall data.                                                                                                                                                             |
| `compare_hand_to_automataion.R`       | How close are the cued recall grading performed by an RA and my automated algorithm? Uses tidy data from `grading_accuracy.R`                                                                                              |
| `deomgraphics_table.R`                | Creates a table of demographic information reported by participants as part of the experiment.                                                                                                                             |
| `Ngo_2021_Reanalysis.Rmd`             | Markdown reanalyzing the openly available data from Ngo et al. 2021. I think there may be a problem with their reported data. See Markdown for more information.                                                           |